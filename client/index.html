<!DOCTYPE html>
<html lang="en">
<head>
        <title>Helpz</title>    
        <meta name="description" content="">
        <meta charset="UTF-8">
    
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <meta name="theme-color" content="#fafafa">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
        <link href="https://fonts.googleapis.com/css?family=Kanit:800i&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="/css/style.css">
</head>
<body>
<div id="error">
    <div class="container">
        <div class="row">
            <h1>Error! We need <strong>help</strong> with our server.</h1>
        </div>
    </div>
</div>
<div id="page">
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo03" aria-controls="navbarTogglerDemo03" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <a class="navbar-brand" href="#">HELPIFY<span>!</span></a>
    
    <div class="collapse navbar-collapse" id="navbarTogglerDemo03">
        <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
        <!--<li class="nav-item active">
            <a class="nav-link" href="#">Home<span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="#">About</a>
        </li>
        <li class="nav-item">
            <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">submit characty</a>
        </li>-->

        </ul>
        <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Create your charity</button>

        </form>
    </div>
</nav>

<header id="focus">
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-4 col-content">
                    <h1>
                        <a id="focusTitle" href="#">Charity</a>
                    </h1>
                    <p id="focusContent">
                       ...
                    </p>
            </div>
        </div>

    </div>
</header>

<section class="filters" id="filters">
    <div class="container">
        <div class="dropdown">
            <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Location
            </a>
            
            <div id="locationDropdown" class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                <a class="dropdown-item">countryName</a>
            </div>

        </div>
    </div>
</section>

<section class="charityEntries" id="charityEntries">
    <div class="container">
        <div class="row">
           <!-- <div class="col-lg-4 col-sm-6 portfolio-item">
                <div class="card h-100">
                    <a href="#"><img class="card-img-top" src="http://placehold.it/700x400" alt=""></a>
                    <div class="card-body">
                    <h4 class="card-title">
                        <a href="#">Charity project</a>
                    </h4>
                    <p class="card-text">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Itaque earum nostrum suscipit ducimus nihil provident, perferendis rem illo, voluptate atque, sit eius in voluptates, nemo repellat fugiat excepturi! Nemo, esse.</p>
                    </div>
                </div>
            </div>

            <div class="col-lg-4 col-sm-6 portfolio-item">
                <div class="card h-100">
                    <a href="#"><img class="card-img-top" src="http://placehold.it/700x400" alt=""></a>
                    <div class="card-body">
                    <h4 class="card-title">
                        <a href="#">Charity project</a>
                    </h4>
                    <p class="card-text">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Itaque earum nostrum suscipit ducimus nihil provident, perferendis rem illo, voluptate atque, sit eius in voluptates, nemo repellat fugiat excepturi! Nemo, esse.</p>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4 col-sm-6 portfolio-item">
                <div class="card h-100">
                    <a href="#"><img class="card-img-top" src="http://placehold.it/700x400" alt=""></a>
                    <div class="card-body">
                    <h4 class="card-title">
                        <a href="#">Project Six</a>
                    </h4>
                    <p class="card-text">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Itaque earum nostrum suscipit ducimus nihil provident, perferendis rem illo, voluptate atque, sit eius in voluptates, nemo repellat fugiat excepturi! Nemo, esse.</p>
                    </div>
                </div>
            </div>

            <div class="col-lg-4 col-sm-6 portfolio-item">
                <div class="card h-100">
                    <a href="#"><img class="card-img-top" src="http://placehold.it/700x400" alt=""></a>
                    <div class="card-body">
                    <h4 class="card-title">
                        <a href="#">Project Six</a>
                    </h4>
                    <p class="card-text">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Itaque earum nostrum suscipit ducimus nihil provident, perferendis rem illo, voluptate atque, sit eius in voluptates, nemo repellat fugiat excepturi! Nemo, esse.</p>
                    </div>
                </div>
            </div>-->
        </div>    
    </div>
</section>
</div>

<footer class="py-5 bg-dark">
    <div class="container">
        <p class="m-0 text-center text-white">Copyright &copy; Help 2019</p>
    </div>
</footer>
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
<script type="text/javascript">

function filter(){
    var location;

    if(location === null || location === ""){
        return;
    }
}

function addLocation(location){
    $("#locationDropdown").append("<a>teste</a>");
    
}

function setFocusCharity(el){

    $("#focus").css("background-image", "url(" + el.name + ")");  
    $("#focusTitle").text(el.name).attr("href", "charity.html#"+el.id);

    $("#focusContent").text(el.description);   

    console.log(el.logoUrl);
}

function createElement(container, el){

    const charityObject = $("<div data-donations='"+ el.donations +"'></div>");
    charityObject.addClass("col-lg-4 col-sm-6 portfolio-item");
    //charityObject.append("<div class='card h-100'><a href='#'><img class='card-img-top' src='http://placehold.it/700x400' alt='' /></a></div>");
    
    const cardObject = $("<div></div>");
    cardObject.addClass("card h-100");

    const linkObject = $("<a></a>");
    linkObject.attr("href", "charity.html/"+el.id);
    linkObject.attr("target", "_self");

    const imgObject = $("<img>");
    imgObject.addClass("card-img-top");
    imgObject.attr("src", el.url);
    imgObject.attr("alt", "img");

    const cardBody = $("<div></div>");
    cardBody.addClass("card-body");
    
    const cardTitle = $("<h4></h4>");
    cardTitle.addClass("card-title");

    const cardTitleLink = $("<a></a>");
    cardTitleLink.attr("href", "charity.html#"+el.id);
    cardTitleLink.attr("target", "_self");
    cardTitleLink.text(el.name);

    const cardText = $("<p></p>");
    cardText.text(el.description);

    linkObject.append(imgObject);
    cardObject.append(linkObject);

    cardObject.append(cardBody);
    cardBody.append(cardTitle);
    cardTitle.append(cardTitleLink);
    
    cardBody.append(cardText);

    charityObject.append(cardObject);
    container.append(charityObject);

}

url = "http://192.168.1.84:8080/help7hearts/api/charity/list";

$(document).ready(function(){
    
    const container = $("#charityEntries").children(".container").children(".row");

    fetch(url).then((resp) => resp.json()).then(function(data){
        
        const randomCharity = Math.floor(Math.random() * data.length);
        setFocusCharity(data[randomCharity]);
        
        
        data.forEach(function(element){
            addLocation(element.location); 
            createElement(container, element);
        });


    }).catch(function(){
        //$("#page").remove();
        //$("#error").show();
    });

    $("#locationDropdown > a").click(function(e){
        e.preventDefault;
        $("#dropdownMenuLink").text( e.target.text );
        
    });
});
</script>
</body>
</html>